<!DOCTYPE html>
<html>
  <head>
    <title>Jiffies Tests</title>
    <base href="/" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/@picocss/pico@latest/css/pico.classless.min.css"
    />
  </head>
  <body>
    <main id="test_output"></main>
    <div style="display: none" id="status"></div>
    <div style="display: none" id="json"></div>
    <div style="display: none" id="xml"></div>
    <script type="module" src="./jiffies/test_all.js"></script>
    <script type="module" src="./jiffies/dom/test.js"></script>
    <script type="module" src="./jiffies/components/test.js"></script>

    <script type="module">
      import { execute } from "./jiffies/scope/execute.js";
      import { displayStatistics } from "./jiffies/scope/display/dom.js";
      import { onConsole } from "./jiffies/scope/display/console.js";
      import { asXML } from "./jiffies/scope/display/junit.js";

      function write(id, value) {
        const start = `--- START_${id.toUpperCase()} ---`;
        const end = `--- END ---`;
        document.getElementById(
          id
        ).innerHTML = `\n${start}\n${value}\n${end}\n`;
      }

      (async function test() {
        const results = await execute();
        displayStatistics(results, document.getElementById("test_output"));
        onConsole(results);
        write("status", results.failed);
        write("json", JSON.stringify(results));
        write("xml", asXML(results));
      })();
    </script>
  </body>
</html>
